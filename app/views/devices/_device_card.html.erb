<div id="<%= dom_id device, :card %>" class="card p-4 border rounded-md shadow-sm flex flex-col gap-3">
  
  <%# --- Header: Name, Type, Status --- %>
  <div class="flex items-start justify-between">
    <div>
      <div class="font-semibold text-lg leading-tight"><%= link_to device.name, device, class: "text-orange-500 hover:text-orange-600", data: { turbo_frame: "_top" } %></div>
      <span class="text-sm text-subtle uppercase font-semibold"><%= device.device_type.humanize %></span>
    </div>
    <span class="text-sm font-bold pi-2 pb-1 rounded-md bg-shade uppercase">
      <%= device.status %>
    </span>
  </div>

  <%# --- Details: Serial & Tag --- %>
  <div class="grid grid-cols-2 gap-2 text-sm">
    <div>
      <span class="text-sm text-subtle block">Serial</span>
      <span class="font-mono"><%= device.serial_number %></span>
    </div>
    <div class="text-end">
      <span class="text-sm text-subtle block">Asset Tag</span>
      <span class="font-mono"><%= device.asset_tag %></span>
    </div>
  </div>

  <%# --- IP Address --- %>
  <div class="p-2 bg-shade rounded-md border flex items-center gap-2">
    <span class="icon icon--globe text-subtle"></span>
    <% if device.ip_address %>
      <span class="font-mono text-sky-500 font-semibold"><%= device.ip_address.address %></span>
    <% else %>
      <span class="text-subtle italic">No IP Assigned</span>
    <% end %>
  </div>

  <%# --- Owner Info --- %>
  <div class="flex items-center gap-3 border-t pt-3 mt-1">
    <div class="flex items-center justify-center rounded-full bg-shade shrink-0 border" style="block-size: 2rem; inline-size: 2rem;">
      <span class="font-semibold text-sm">
        <%= device.employee&.first_name&.first || "?" %>
      </span>
    </div>
    <div class="flex flex-col text-sm">
      <% if device.employee %>
        <span class="font-semibold"><%= device.employee.first_name %> <%= device.employee.last_name %></span>
        <span class="text-sm text-subtle"><%= device.department.name %></span>
      <% else %>
        <span class="text-subtle italic">Unassigned (In Stock)</span>
      <% end %>
    </div>
  </div>

  <div class="flex items-center justify-end text-xs gap-4">
    <%= link_to "Edit", edit_device_path(device), class: "text-subtle hover:text-orange-500", data: { turbo_frame: "modal" } %>
    <% delete_trigger = button_tag "Delete", type: "button", class: "text-subtle hover:text-orange-500", data: { action: "dialog#showModal", menu_target: "item" }, role: "menuitem" %>
    <%= modal_dialog delete_trigger, size: "450px", title: "Delete '#{device.name}'?" do %>
      <p class="text-sm text-subtle mbe-4">This will permanently delete this device. This action cannot be undone.</p>
      <div class="flex items-center justify-end gap">
        <button type="button" class="btn" data-action="click->dialog#close">Cancel</button>
        <%= button_to "Continue", device, method: :delete, class: "btn btn--negative" %>
      </div>
    <% end %>
  </div>
</div>