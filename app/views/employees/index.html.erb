<% content_for :title, "Employees" %>

<% content_for :page_header do %>
  <h4 class="font-semibold">Employees</h4>
<% end %>

<% content_for :header_action_buttons do %>
    <%= link_to "Onboard Employee", new_employee_path,
                  class: "btn bg-orange-400 text-white font-semibold rounded-md p-2 show@md",
                  data: { turbo_frame: "modal" } %>
<% end %>

<div class="absolute hide@md" style="bottom: 10rem; right: 1rem; z-index: 9999">
  <%= link_to new_employee_path, class: "btn bg-orange-400 text-white font-semibold rounded-full p-5", data: { turbo_frame: "modal" } do %>
    <span class="icon icon--pen"></span>
  <% end %>
</div>

<div class="p-4 i-full">
  <%= form_with url: employees_path, method: :get, class: "mbe-6 flex gap-2", data: { turbo_frame: "employees", turbo_action: "advance" } do |f| %>
    <%= f.text_field :query, placeholder: "Search name or email...", class: "input border rounded p-2 flex-grow", value: params[:query] %>
    <%= f.submit "Search", class: "btn btn--primary" %>
  <% end %>

  <%= turbo_frame_tag "new_employee" %>

  <%= turbo_frame_tag "employees" do %>
    <div class="show@md relative i-full overflow-x-auto border rounded-md bg-surface">
      <table class="table i-full text-left">
        <thead class="bg-shade text-subtle font-semibold border-b">
          <tr>
            <th class="p-4">Name</th>
            <th class="p-4">Department</th>
            <th class="p-4">Status</th>
            <th class="p-4 text-end">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
          <%= render @employees %>
        </tbody>
      </table>
    </div>

    <div class="hide@md flex flex-col gap-4">
      <%= render partial: "employees/employee_card", collection: @employees, as: :employee %>
    </div>
  <% end %>
</div>